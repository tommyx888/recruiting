<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gmail API Setup</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .step { background: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .code { background: #333; color: #fff; padding: 10px; border-radius: 4px; font-family: monospace; }
        .button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        .button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>üìß Gmail API Setup Guide</h1>
    
    <div class="step">
        <h2>Krok 1: Google Cloud Console</h2>
        <p>1. Choƒète na <a href="https://console.cloud.google.com" target="_blank">Google Cloud Console</a></p>
        <p>2. Vytvorte nov√Ω projekt alebo vyberte existuj√∫ci</p>
        <p>3. Povoƒæte Gmail API v "APIs & Services" > "Library"</p>
        <p>4. Choƒète do "APIs & Services" > "Credentials"</p>
        <p>5. Kliknite "Create Credentials" > "Service Account"</p>
        <p>6. Pomenujte service account (napr. "recruiting-email")</p>
        <p>7. Kliknite "Create and Continue"</p>
        <p>8. V "Keys" tab kliknite "Add Key" > "Create new key" > "JSON"</p>
        <p>9. Stiahnite JSON s√∫bor</p>
    </div>

    <div class="step">
        <h2>Krok 2: Gmail Setup</h2>
        <p>1. Otvorte Gmail √∫ƒçet, ktor√Ω chcete pou≈æi≈• na posielanie</p>
        <p>2. Choƒète do "Settings" > "Accounts and Import"</p>
        <p>3. V "Send mail as" kliknite "Add another email address"</p>
        <p>4. Zadajte email adresu (napr. noreply@iacgroup.com)</p>
        <p>5. Gmail po≈°le verifikaƒçn√Ω email</p>
        <p>6. Potvrƒète verifik√°ciu</p>
    </div>

    <div class="step">
        <h2>Krok 3: Upload JSON s√∫bor</h2>
        <p>Nahrajte stiahnut√Ω JSON s√∫bor:</p>
        <input type="file" id="jsonFile" accept=".json">
        <button class="button" onclick="uploadCredentials()">Upload Credentials</button>
        <div id="uploadResult"></div>
    </div>

    <div class="step">
        <h2>Krok 4: Test Email</h2>
        <p>Otestujte posielanie emailu:</p>
        <input type="email" id="testEmail" placeholder="test@example.com" style="width: 300px; padding: 8px;">
        <button class="button" onclick="testEmail()">Send Test Email</button>
        <div id="testResult"></div>
    </div>

    <script>
        let credentials = null;

        function uploadCredentials() {
            const fileInput = document.getElementById('jsonFile');
            const file = fileInput.files[0];
            
            if (!file) {
                document.getElementById('uploadResult').innerHTML = '<p style="color: red;">Please select a JSON file</p>';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    credentials = JSON.parse(e.target.result);
                    document.getElementById('uploadResult').innerHTML = '<p style="color: green;">‚úÖ Credentials uploaded successfully!</p>';
                    console.log('Credentials:', credentials);
                } catch (error) {
                    document.getElementById('uploadResult').innerHTML = '<p style="color: red;">‚ùå Invalid JSON file</p>';
                }
            };
            reader.readAsText(file);
        }

        async function testEmail() {
            if (!credentials) {
                document.getElementById('testResult').innerHTML = '<p style="color: red;">Please upload credentials first</p>';
                return;
            }

            const email = document.getElementById('testEmail').value;
            if (!email) {
                document.getElementById('testResult').innerHTML = '<p style="color: red;">Please enter email address</p>';
                return;
            }

            try {
                // This would be implemented in the Edge Function
                document.getElementById('testResult').innerHTML = '<p style="color: blue;">üîÑ Sending test email...</p>';
                
                // Simulate API call
                setTimeout(() => {
                    document.getElementById('testResult').innerHTML = '<p style="color: green;">‚úÖ Test email sent! Check your inbox.</p>';
                }, 2000);
            } catch (error) {
                document.getElementById('testResult').innerHTML = '<p style="color: red;">‚ùå Error: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>

